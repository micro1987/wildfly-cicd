node('slave') {
#  stage('tag latest to old image') {
#    openshift.withCluster() {
#        openshift.withProject() {
#             openshift.tag("wildfly-app:latest", "wildfly-app:old") 
#        }
#   }
#  }
  
  stage ('deploy image to dev') {
    openshift.withCluster() {
        openshift.withProject() {  
            openshiftDeploy(namespace: 'wildfly-dev' deploymentConfig: 'wildfly-app', verbose: 'true')
        }
    }    
  }
  stage ('Tag Image to TEST') {
     openshift.withCluster() {
        openshift.withProject() {
            openshift.tag(namespace: 'wildfly-dev', srcStream: 'wildfly-app', srcTag: 'latest' destStream: 'wildfly-app',
                 destTag: 'latest', destinationNamespace: 'wildfly-test')
        }
     }
  }

  
}
